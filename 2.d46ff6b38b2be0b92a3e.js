(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"1seG":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var i=o("fXoL"),s=o("qBIq"),n=o("tyNb"),c=o("TEn/"),r=o("ofXK");function b(e,t){if(1&e){const e=i.Pb();i.Ob(0,"ion-slide",4),i.Wb("click",function(){i.jc(e);const o=t.$implicit;return i.Yb().selecteBook(o.id)}),i.Ob(1,"ion-grid",5),i.Ob(2,"ion-row",6),i.Mb(3,"img",7),i.Nb(),i.Ob(4,"ion-row",6),i.Ob(5,"p"),i.nc(6),i.Nb(),i.Nb(),i.Nb(),i.Nb()}if(2&e){const e=t.$implicit;i.Bb(3),i.dc("src",e.image,i.kc),i.Bb(3),i.oc(e.title)}}let a=(()=>{class e{constructor(e,t){this._bookService=e,this._router=t,this.slideOpts={slidesPerView:3,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}}}ngOnInit(){this.researchedBook$=this._bookService.researchedBooks$}selecteBook(e){this._router.navigate(["/pages/home/book-finded",e])}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(s.a),i.Lb(n.e))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-researched-book"]],decls:8,vars:4,consts:[[1,"block_list"],["color","academicus-green"],[3,"options"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["fixed",""],[1,"ion-justify-content-center"],["alt","test",1,"img_book",3,"src"]],template:function(e,t){1&e&&(i.Ob(0,"ion-content"),i.Ob(1,"div",0),i.Ob(2,"ion-text",1),i.Ob(3,"h1"),i.nc(4,"Recherch\xe9s"),i.Nb(),i.Nb(),i.Ob(5,"ion-slides",2),i.mc(6,b,7,2,"ion-slide",3),i.Zb(7,"async"),i.Nb(),i.Nb(),i.Nb()),2&e&&(i.Bb(5),i.dc("options",t.slideOpts),i.Bb(1),i.dc("ngForOf",i.ac(7,2,t.researchedBook$)))},directives:[c.m,c.H,c.D,r.j,c.C,c.n,c.w],pipes:[r.b],styles:[".block_list[_ngcontent-%COMP%]{margin:30px 10px 10px}.img_book[_ngcontent-%COMP%]{height:130px}"]}),e})()},"4vlQ":function(e,t,o){"use strict";o.d(t,"a",function(){return l});var i=o("vkgz"),s=o("fXoL"),n=o("vcGB"),c=o("tyNb"),r=o("TEn/"),b=o("ofXK");function a(e,t){1&e&&s.Mb(0,"ion-icon",9)}function d(e,t){if(1&e){const e=s.Pb();s.Ob(0,"ion-slide",3),s.Wb("click",function(){s.jc(e);const o=t.$implicit;return s.Yb().selecteBook(o.id)}),s.Ob(1,"ion-grid",4),s.Ob(2,"ion-row",5),s.Mb(3,"img",6),s.Nb(),s.Ob(4,"ion-row",7),s.Ob(5,"ion-label"),s.nc(6),s.Nb(),s.mc(7,a,1,0,"ion-icon",8),s.Nb(),s.Nb(),s.Nb()}if(2&e){const e=t.$implicit;s.Bb(3),s.dc("src",e.image,s.kc),s.Bb(3),s.oc(e.title.substr(0,25)),s.Bb(1),s.dc("ngIf",e.interests>0)}}let l=(()=>{class e{constructor(e,t){this._userBookService=e,this._router=t,this.slideOpts={slidesPerView:3,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}}}ngOnInit(){this._userBookService.getUserResearchedBooks(),this.subscription=this._userBookService.researchedBooks$.pipe(Object(i.a)(e=>this._researchedBooks$=e)).subscribe(e=>e)}selecteBook(e){this._router.navigate(["/pages/user-profile/user-book",e])}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(n.a),s.Lb(c.e))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-user-book-researched"]],decls:7,vars:2,consts:[[1,"block_list"],[3,"options"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["fixed",""],[1,"ion-justify-content-center"],["alt","test",1,"img_book",3,"src"],[1,"ion-justify-content-center","ion-margin-top"],["size","large","name","alert-circle-sharp","color","warning",4,"ngIf"],["size","large","name","alert-circle-sharp","color","warning"]],template:function(e,t){1&e&&(s.Ob(0,"ion-content"),s.Ob(1,"div",0),s.Ob(2,"ion-text"),s.Ob(3,"h1"),s.nc(4,"Recherch\xe9s"),s.Nb(),s.Nb(),s.Ob(5,"ion-slides",1),s.mc(6,d,8,3,"ion-slide",2),s.Nb(),s.Nb(),s.Nb()),2&e&&(s.Bb(5),s.dc("options",t.slideOpts),s.Bb(1),s.dc("ngForOf",t._researchedBooks$))},directives:[r.m,r.H,r.D,b.j,r.C,r.n,r.w,r.t,b.k,r.p],styles:["ion-content[_ngcontent-%COMP%]{height:100vh;width:100vw}.block_list[_ngcontent-%COMP%]{margin-top:50px}.img_book[_ngcontent-%COMP%]{height:130px}"]}),e})()},MS4O:function(e,t,o){"use strict";o.d(t,"a",function(){return c});var i=o("2Vo4"),s=o("fXoL"),n=o("I/3d");let c=(()=>{class e{constructor(e){this._firestore=e,this._bookFinded$=new i.a(null),this.bookFinded$=this._bookFinded$.asObservable()}getUserBookById(e){this._firestore.doc(`books/${e}`).valueChanges({idField:"id"}).subscribe(e=>this._bookFinded$.next(e))}set(e){return this._bookFinded$.next(e)}get(){return this.bookFinded$}sendOffer(){console.log("ok")}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(n.a))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},PCNd:function(e,t,o){"use strict";o.d(t,"a",function(){return c});var i=o("ofXK"),s=o("TEn/"),n=o("fXoL");o("hKYS"),o("1seG"),o("4vlQ");let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Jb({type:e}),e.\u0275inj=n.Ib({imports:[[i.c,s.M]]}),e})()},hKYS:function(e,t,o){"use strict";o.d(t,"a",function(){return O});var i=o("mrSG"),s=o("SxV6"),n=o("vkgz"),c=o("fXoL"),r=o("qBIq"),b=o("MS4O"),a=o("tyNb"),d=o("TEn/"),l=o("ofXK"),u=o("1seG");function g(e,t){if(1&e){const e=c.Pb();c.Ob(0,"ion-segment-button",9),c.Wb("click",function(){c.jc(e);const o=t.$implicit;return c.Yb().selectCategory(o)}),c.Mb(1,"ion-icon",10),c.Ob(2,"ion-label"),c.nc(3),c.Nb(),c.Nb()}if(2&e){const e=t.$implicit;c.dc("value",e.name),c.Bb(1),c.ec("name",e.icon),c.Bb(2),c.oc(e.name)}}function h(e,t){if(1&e){const e=c.Pb();c.Ob(0,"ion-slide"),c.Ob(1,"ion-grid",11),c.Wb("click",function(){c.jc(e);const o=t.$implicit;return c.Yb().findedBook(o.id)}),c.Ob(2,"ion-row",12),c.Mb(3,"img",13),c.Nb(),c.Ob(4,"ion-row",12),c.Ob(5,"p"),c.nc(6),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=t.$implicit;c.Bb(3),c.dc("src",e.image,c.kc),c.Bb(3),c.oc(e.title.substr(0,25))}}function f(e,t){if(1&e){const e=c.Pb();c.Ob(0,"ion-segment-button",9),c.Wb("click",function(){c.jc(e);const o=t.$implicit;return c.Yb(2).selectSubcategory(o.id)}),c.Ob(1,"ion-label"),c.nc(2),c.Nb(),c.Nb()}if(2&e){const e=t.$implicit;c.dc("value",e.id),c.Bb(2),c.oc(e.name)}}function p(e,t){if(1&e&&(c.Ob(0,"ion-segment",14),c.mc(1,f,3,2,"ion-segment-button",3),c.Zb(2,"async"),c.Nb()),2&e){const e=c.Yb();c.Bb(1),c.dc("ngForOf",c.ac(2,1,e.subCategories$))}}function m(e,t){if(1&e){const e=c.Pb();c.Ob(0,"ion-slide"),c.Ob(1,"ion-grid",11),c.Wb("click",function(){c.jc(e);const o=t.$implicit;return c.Yb(2).findedBook(o.id)}),c.Ob(2,"ion-row",12),c.Mb(3,"img",15),c.Nb(),c.Ob(4,"ion-row",12),c.Ob(5,"p"),c.nc(6),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=t.$implicit;c.Bb(3),c.dc("src",e.image,c.kc),c.Bb(3),c.oc(e.title.substr(0,25))}}function k(e,t){if(1&e&&(c.Ob(0,"ion-slides",5),c.mc(1,m,7,2,"ion-slide",6),c.Nb()),2&e){const e=c.Yb();c.dc("options",e.slideOpts),c.Bb(1),c.dc("ngForOf",e.selectedSubCategory$)}}let O=(()=>{class e{constructor(e,t,o){this._firestore=e,this._findedBook=t,this._router=o,this.subCategory=!1,this.max=10,this.min=0,this.slideOpts={slidesPerView:3,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}}}ngOnInit(){return Object(i.b)(this,void 0,void 0,function*(){this.categoryList$=this._firestore.getCategories();const e=yield this.categoryList$.pipe(Object(s.a)()).toPromise();this.defaultCategory=e[0],this.selectCategory(this.defaultCategory),this.subCategories$=this._firestore.subCategories$})}selectCategory(e){return Object(i.b)(this,void 0,void 0,function*(){this.categorySelected=e,this.booksPerCategory$=this._firestore.getBooksByCategory$(e).pipe(Object(n.a)(e=>console.log("selelCat:===> ",e))),this._firestore.getSubCategories(e.name),this._firestore.subCategories$.pipe(Object(n.a)(e=>console.log(this.isSubCategory=e.length))).subscribe(e=>{var t;this.selectSubcategory(null===(t=e[0])||void 0===t?void 0:t.id)})})}findedBook(e){this._router.navigate(["/pages/home/book-finded",e])}selectSubcategory(e){e&&this._firestore._getBooksBySubCategory(e).pipe(e=>e).subscribe(e=>this.selectedSubCategory$=e)}loadData(e){return Object(i.b)(this,void 0,void 0,function*(){this.max=this.max+10,e.target.complete()})}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(r.a),c.Lb(b.a),c.Lb(a.e))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-categories"]],decls:19,vars:13,consts:[[1,"block"],["color","academicus-green"],["color","academicus-green","scrollable","",3,"value"],[3,"value","click",4,"ngFor","ngForOf"],[1,"block_list"],[3,"options"],[4,"ngFor","ngForOf"],["mode","md","color","academicus-green","scrollable","",4,"ngIf"],[3,"options",4,"ngIf"],[3,"value","click"],[3,"name"],["fixed","",3,"click"],[1,"ion-justify-content-center"],["alt","test",1,"img_book",3,"src"],["mode","md","color","academicus-green","scrollable",""],["alt","book",1,"img_book",3,"src"]],template:function(e,t){1&e&&(c.Ob(0,"ion-content"),c.Ob(1,"div",0),c.Ob(2,"ion-text",1),c.Ob(3,"h1"),c.nc(4,"Categories"),c.Nb(),c.Nb(),c.Ob(5,"ion-segment",2),c.mc(6,g,4,3,"ion-segment-button",3),c.Zb(7,"async"),c.Nb(),c.Nb(),c.Ob(8,"div",4),c.Ob(9,"ion-text",1),c.Ob(10,"h4"),c.nc(11),c.Nb(),c.Nb(),c.Ob(12,"ion-slides",5),c.mc(13,h,7,2,"ion-slide",6),c.Zb(14,"async"),c.Nb(),c.mc(15,p,3,3,"ion-segment",7),c.Zb(16,"async"),c.mc(17,k,2,2,"ion-slides",8),c.Nb(),c.Mb(18,"app-researched-book"),c.Nb()),2&e&&(c.Bb(5),c.dc("value",t.defaultCategory),c.Bb(1),c.dc("ngForOf",c.ac(7,7,t.categoryList$)),c.Bb(5),c.oc(null!=t.categorySelected&&t.categorySelected.name?null==t.categorySelected?null:t.categorySelected.name:null==t.defaultCategory?null:t.defaultCategory.name),c.Bb(1),c.dc("options",t.slideOpts),c.Bb(1),c.dc("ngForOf",c.ac(14,9,t.booksPerCategory$)),c.Bb(2),c.dc("ngIf",c.ac(16,11,t.subCategories$)),c.Bb(2),c.dc("ngIf",t.isSubCategory>0))},directives:[d.m,d.H,d.y,d.P,l.j,d.D,l.k,u.a,d.z,d.p,d.t,d.C,d.n,d.w],pipes:[l.b],styles:["ion-content[_ngcontent-%COMP%]{padding:20px;margin:0}ion-button[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:5px}ion-button[_ngcontent-%COMP%]:active{background:red}.block[_ngcontent-%COMP%]{margin:10px}.block_list[_ngcontent-%COMP%]{margin:30px 10px 10px}.img_book[_ngcontent-%COMP%]{height:130px}p[_ngcontent-%COMP%]{font-size:13px}"]}),e})()},qBIq:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var i=o("mrSG"),s=o("2Vo4"),n=o("lJxs"),c=o("vkgz"),r=o("fXoL"),b=o("I/3d");let a=(()=>{class e{constructor(e){this._firestore=e,this.booksSubject$=new s.a([]),this.books$=this.booksSubject$.asObservable(),this.categorySujet$=new s.a([]),this.booksBycategory$=this.categorySujet$.asObservable(),this._researchedBooks$=new s.a([]),this.researchedBooks$=this._researchedBooks$.asObservable(),this._subCategories$=new s.a([]),this.subCategories$=this._subCategories$.asObservable(),this._booksSubCategory$=new s.a([]),this.booksSubCategory$=this._booksSubCategory$.asObservable(),this.colections=this._firestore.collection("books",e=>e.where("researched","==",!1)),this.colections.stateChanges(["added","modified","removed"]).pipe(Object(n.a)(e=>e.map(e=>{const t=e.payload.doc.data(),o=e.type;return Object.assign(Object.assign({id:e.payload.doc.id},t),{type:o})}))).subscribe(e=>{const t=[...this.booksSubject$.value.filter(t=>!e.find(e=>e.id===t.id)),...e.filter(e=>"removed"!==e.type)].map(e=>(delete e.type,e));this.booksSubject$.next(t)}),this.categories$=this._firestore.collection("categories").valueChanges(),this._firestore.collection("books",e=>e.where("researched","==",!0)).stateChanges(["added","modified","removed"]).pipe(Object(n.a)(e=>e.map(e=>{const t=e.payload.doc.data(),o=e.type;return Object.assign(Object.assign({id:e.payload.doc.id},t),{type:o})}))).subscribe(e=>{const t=[...this._researchedBooks$.value.filter(t=>!e.find(e=>e.id===t.id)),...e.filter(e=>"removed"!==e.type)].map(e=>(delete e.type,e));return this._researchedBooks$.next(t),t})}createBook(e){this._firestore.collection("books").add(e).then(e=>{console.log("Document written with ID: ",e.id)}).catch(e=>{console.error("Error adding document: ",e)})}getBooksByCategory$(e){return this.getSubCategories(e.name),this.books$.pipe(Object(n.a)(t=>t.filter(t=>t.categoryId===e.name)),Object(c.a)(e=>this.categorySujet$.next(e)))}getCategories(){return this.categories$}getSubCategories(e){this._firestore.collection("subcategories",t=>t.where("parent","==",e)).stateChanges(["added"]).pipe(Object(n.a)(e=>e.map(e=>{const t=e.payload.doc.data();return Object.assign({id:e.payload.doc.id},t)}))).subscribe(e=>this._subCategories$.next(e.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)))}_getBooksBySubCategory(e){return this.books$.pipe(Object(n.a)(t=>t.filter(t=>t.subcategory===e)),Object(c.a)(e=>this._booksSubCategory$.next(e)))}updateBook(e){var{id:t}=e,o=Object(i.f)(e,["id"]);this._firestore.collection("books").doc(t).update(o).then(e=>console.log("Success!!!")).catch(e=>console.log("error: ",e))}deleteBook(e){this._firestore.collection("books").doc(e).delete().then(e=>e).catch(e=>console.log("Error: ",e))}}return e.\u0275fac=function(t){return new(t||e)(r.Sb(b.a))},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);