(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{jWvB:function(e,t,o){"use strict";o.r(t),o.d(t,"BooksDetailModule",function(){return O});var i=o("ofXK"),n=o("tyNb"),r=o("mrSG"),s=o("3Pt+"),b=o("vkgz"),a=o("fXoL"),c=o("qBIq"),u=o("UbJi"),l=o("TEn/");function h(e,t){if(1&e&&(a.Ob(0,"ion-select-option",16),a.nc(1),a.Nb()),2&e){const e=t.$implicit;a.dc("value",e.name),a.Bb(1),a.pc(" ",e.name," ")}}function g(e,t){if(1&e&&(a.Ob(0,"ion-select-option",16),a.nc(1),a.Nb()),2&e){const e=t.$implicit;a.dc("value",e.id),a.Bb(1),a.pc(" ",e.name," ")}}const f=[{path:"",component:(()=>{class e{constructor(e,t,o,i,n){this._firestore=e,this._angularAuth=t,this._route=o,this._formBuilder=i,this._toast=n,this.newBook={},this.formFormat="offer",this.isSubCategory=!0,this.form=this._formBuilder.group({category:["",s.k.required],offer:["",s.k.required]})}ngOnInit(){this.categoryList$=this._firestore.getCategories(),this.subscription=this._route.queryParams.subscribe(e=>this.theBook=e)}segmentChanged(e){this.formFormat=e.target.value,console.log("event: ",e.target.value)}registerBook$(){return Object(r.b)(this,void 0,void 0,function*(){const e=yield this._angularAuth.currentUser.then(e=>e.uid);this.newBook=Object.assign(Object.assign({},this.newBook),{userId:e,title:this.theBook.title?this.theBook.title:"",authors:this.theBook.authors?this.theBook.authors:"",image:this.theBook.image,publisher:this.theBook.publisher?this.theBook.publisher:"",categoryId:this.form.value.category,offer:this.form.value.offer,interests:0,researched:"offer"!==this.formFormat,subcategory:this.selectedSubCategory?this.selectedSubCategory:""}),this._firestore.createBook(this.newBook),this.displayPopUp(),this.form.reset()})}displayPopUp(){return Object(r.b)(this,void 0,void 0,function*(){const e=yield this._toast.create({message:"Livre enregistr\xe9 avec success",position:"bottom",keyboardClose:!0,color:"dark",duration:2e3});yield e.present()})}selectSubCategory(e){this.selectedSubCategory=e.detail.value}getSubcategory(e){this.formSubCategories=e.detail.value,this.subCategoriesList(e.detail.value)}subCategoriesList(e){this._firestore.getSubCategories(e),this.subCategory$=this._firestore.subCategories$,this._firestore.subCategories$.pipe(Object(b.a)(e=>this.isSubCategory=!(e.length>0))).subscribe(e=>e)}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(c.a),a.Lb(u.a),a.Lb(n.a),a.Lb(s.a),a.Lb(l.R))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-books-detail"]],decls:59,vars:13,consts:[[1,"ion-no-border"],["slot","start"],[3,"src"],[1,"ion-justify-content-center"],[1,"info_text"],["color","academicus-green","value","offer",3,"ionChange"],["value","offer"],["value","request"],["fixed",""],[3,"formGroup","ngSubmit"],["formControlName","category","okText","Okay","cancelText","Dismiss","required","",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["okText","Okay","cancelText","Dismiss",3,"disabled","ionChange"],["formControlName","offer","placeholder","Offre","required",""],["offer",""],["color","academicus-green","type","submit","expand","full"],[3,"value"]],template:function(e,t){1&e&&(a.Ob(0,"ion-header",0),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-buttons",1),a.Mb(3,"ion-back-button"),a.Nb(),a.Ob(4,"ion-title"),a.nc(5),a.Nb(),a.Nb(),a.Nb(),a.Ob(6,"ion-content"),a.Ob(7,"ion-card"),a.Ob(8,"ion-card-header"),a.Mb(9,"ion-img",2),a.Ob(10,"ion-grid"),a.Ob(11,"ion-row",3),a.Ob(12,"ion-card-title"),a.nc(13),a.Nb(),a.Nb(),a.Ob(14,"ion-row",3),a.Ob(15,"ion-card-subtitle"),a.nc(16),a.Nb(),a.Nb(),a.Ob(17,"ion-row",3),a.Ob(18,"ion-text"),a.nc(19," \xc9dition: "),a.Nb(),a.nc(20),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(21,"ion-grid"),a.Ob(22,"ion-row",3),a.Ob(23,"ion-text"),a.Ob(24,"p",4),a.nc(25,"Ajouter livre"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(26,"ion-segment",5),a.Wb("ionChange",function(e){return t.segmentChanged(e)}),a.Ob(27,"ion-segment-button",6),a.Ob(28,"ion-label"),a.nc(29,"J'offre"),a.Nb(),a.Nb(),a.Ob(30,"ion-segment-button",7),a.Ob(31,"ion-label"),a.nc(32,"Je recherche"),a.Nb(),a.Nb(),a.Nb(),a.Ob(33,"ion-grid",8),a.Ob(34,"form",9),a.Wb("ngSubmit",function(){return t.registerBook$()}),a.Ob(35,"ion-row"),a.Ob(36,"ion-col"),a.Ob(37,"ion-list"),a.Ob(38,"ion-item"),a.Ob(39,"ion-label"),a.nc(40,"Categories"),a.Nb(),a.Ob(41,"ion-select",10),a.Wb("ionChange",function(e){return t.getSubcategory(e)}),a.mc(42,h,2,2,"ion-select-option",11),a.Zb(43,"async"),a.Nb(),a.Nb(),a.Ob(44,"ion-item"),a.Ob(45,"ion-label"),a.nc(46,"Sub categories"),a.Nb(),a.Ob(47,"ion-select",12),a.Wb("ionChange",function(e){return t.selectSubCategory(e)}),a.mc(48,g,2,2,"ion-select-option",11),a.Zb(49,"async"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(50,"ion-row"),a.Ob(51,"ion-col"),a.Ob(52,"ion-item"),a.Mb(53,"ion-textarea",13,14),a.Nb(),a.Nb(),a.Nb(),a.Ob(55,"ion-row"),a.Ob(56,"ion-col"),a.Ob(57,"ion-button",15),a.nc(58,"Enregister"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.Bb(5),a.oc(t.theBook.title),a.Bb(4),a.dc("src",t.theBook.image),a.Bb(4),a.oc(t.theBook.title),a.Bb(3),a.oc(t.theBook.authors),a.Bb(4),a.pc(" ",t.theBook.publisher," "),a.Bb(14),a.dc("formGroup",t.form),a.Bb(8),a.dc("ngForOf",a.ac(43,9,t.categoryList$)),a.Bb(5),a.dc("disabled",t.isSubCategory),a.Bb(1),a.dc("ngForOf",a.ac(49,11,t.subCategory$)))},directives:[l.o,l.L,l.f,l.b,l.c,l.K,l.m,l.g,l.i,l.q,l.n,l.w,l.k,l.j,l.H,l.y,l.P,l.z,l.t,s.l,s.h,s.c,l.l,l.u,l.s,l.A,s.g,s.b,s.j,i.j,l.I,l.Q,l.e,l.B],pipes:[i.b],styles:["ion-img[_ngcontent-%COMP%]{height:200px}.info_text[_ngcontent-%COMP%]{margin:10px}"]}),e})()}];let d=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({imports:[[n.h.forChild(f)],n.h]}),e})();var m=o("PCNd");let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({imports:[[i.c,d,l.M,m.a,s.i]]}),e})()}}]);