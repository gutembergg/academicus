(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1seG":function(e,t,o){"use strict";o.d(t,"a",function(){return s});var n=o("fXoL"),i=o("TEn/");let s=(()=>{class e{constructor(){this.slideOpts={slidesPerView:3,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}}}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Fb({type:e,selectors:[["app-researched-book"]],decls:12,vars:1,consts:[["color","primary"],[3,"options"],["fixed",""],[1,"ion-justify-content-center"]],template:function(e,t){1&e&&(n.Ob(0,"ion-content"),n.Ob(1,"div"),n.Ob(2,"ion-text",0),n.Ob(3,"h1"),n.nc(4,"Recherch\xe9s"),n.Nb(),n.Nb(),n.Ob(5,"ion-slides",1),n.Ob(6,"ion-slide"),n.Ob(7,"ion-grid",2),n.Mb(8,"ion-row",3),n.Ob(9,"ion-row",3),n.Ob(10,"p"),n.nc(11,"book title"),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&e&&(n.Bb(5),n.dc("options",t.slideOpts))},directives:[i.m,i.H,i.D,i.C,i.n,i.w],styles:[""]}),e})()},"74mu":function(e,t,o){"use strict";o.d(t,"a",function(){return i}),o.d(t,"b",function(){return s}),o.d(t,"c",function(){return n}),o.d(t,"d",function(){return c});const n=(e,t)=>null!==t.closest(e),i=(e,t)=>"string"==typeof e&&e.length>0?Object.assign({"ion-color":!0,[`ion-color-${e}`]:!0},t):t,s=e=>{const t={};return(e=>void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter(e=>null!=e).map(e=>e.trim()).filter(e=>""!==e):[])(e).forEach(e=>t[e]=!0),t},r=/^[a-z][a-z0-9+\-.]*:/,c=async(e,t,o,n)=>{if(null!=e&&"#"!==e[0]&&!r.test(e)){const i=document.querySelector("ion-router");if(i)return null!=t&&t.preventDefault(),i.push(e,o,n)}return!1}},JbSX:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var n=o("wEJo"),i=o("qULd"),s=o("iWo5");const r=(e,t)=>{let o,r;const c=(e,n,i)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(e,n);s&&t(s)?s!==o&&(l(),a(s,i)):l()},a=(e,t)=>{o=e,r||(r=o);const i=o;Object(n.f)(()=>i.classList.add("ion-activated")),t()},l=(e=!1)=>{if(!o)return;const t=o;Object(n.f)(()=>t.classList.remove("ion-activated")),e&&r!==o&&o.click(),o=void 0};return Object(s.createGesture)({el:e,gestureName:"buttonActiveDrag",threshold:0,onStart:e=>c(e.currentX,e.currentY,i.a),onMove:e=>c(e.currentX,e.currentY,i.b),onEnd:()=>{l(!0),Object(i.e)(),r=void 0}})}},"M7+f":function(e,t,o){"use strict";o.d(t,"a",function(){return a});var n=o("2Vo4"),i=o("vkgz"),s=o("lJxs"),r=o("fXoL"),c=o("I/3d");let a=(()=>{class e{constructor(e){this._firestore=e,this._interest$=new n.a([]),this.interest$=this._interest$.asObservable()}createInterest(e){const{bookId:t}=e;this._firestore.collection("interest").add(e).then(e=>{console.log("Document written with ID: ",e.id),this._firestore.collection("books").doc(t).valueChanges({idField:"id"}).pipe(Object(i.a)(e=>console.log("====>",e.interests))).subscribe(e=>e),this.getInterestsCount(t).pipe(Object(i.a)(e=>console.log("----",e))).subscribe(e=>e),this._firestore.collection("books").doc(t).update({interests:1})}).catch(e=>{console.error("Error adding document: ",e)})}getInterestsCount(e){return this._firestore.collection("books").doc(e).valueChanges({idField:"id"}).pipe(Object(i.a)(e=>console.log("resTap",e)))}getListInterstsByBookId(e){this._firestore.collection("interest",t=>t.where("bookId","==",e)).stateChanges(["added","removed"]).pipe(Object(s.a)(e=>e.map(e=>{const t=e.payload.doc.data(),o=e.type;return Object.assign(Object.assign({id:e.payload.doc.id},t),{type:o})}))).subscribe(e=>{const t=[...this._interest$.value.filter(t=>!e.find(e=>e.id===t.id)),...e.filter(e=>"removed"!==e.type)].map(e=>(delete e.type,e));this._interest$.next(t)})}deleteInteret(e){this._firestore.collection("interest").doc(e).delete().then(e=>console.log("Interest deleted")).catch(e=>console.log("Error: ",e))}}return e.\u0275fac=function(t){return new(t||e)(r.Sb(c.a))},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},MS4O:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var n=o("2Vo4"),i=o("fXoL"),s=o("I/3d");let r=(()=>{class e{constructor(e){this._firestore=e,this._bookFinded$=new n.a(null),this.bookFinded$=this._bookFinded$.asObservable()}getUserBookById(e){this._firestore.doc(`books/${e}`).valueChanges({idField:"id"}).subscribe(e=>this._bookFinded$.next(e))}set(e){return this._bookFinded$.next(e)}get(){return this.bookFinded$}sendOffer(){console.log("ok")}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(s.a))},e.\u0275prov=i.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},PCNd:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var n=o("ofXK"),i=o("TEn/"),s=o("fXoL");o("hKYS"),o("1seG");let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({imports:[[n.c,i.M]]}),e})()},acej:function(e,t,o){"use strict";o.d(t,"a",function(){return i}),o.d(t,"b",function(){return s});var n=o("1vRN");const i=async(e,t,o,i,s)=>{if(e)return e.attachViewToDom(t,o,s,i);if("string"!=typeof o&&!(o instanceof HTMLElement))throw new Error("framework delegate is missing");const r="string"==typeof o?t.ownerDocument&&t.ownerDocument.createElement(o):o;return i&&i.forEach(e=>r.classList.add(e)),s&&Object.assign(r,s),t.appendChild(r),await new Promise(e=>Object(n.c)(r,e)),r},s=(e,t)=>{if(t){if(e)return e.removeViewFromDom(t.parentElement,t);t.remove()}return Promise.resolve()}},h3R7:function(e,t,o){"use strict";o.d(t,"a",function(){return n});const n={bubbles:{dur:1e3,circles:9,fn:(e,t,o)=>{const n=e*t/o-e+"ms",i=2*Math.PI*t/o;return{r:5,style:{top:9*Math.sin(i)+"px",left:9*Math.cos(i)+"px","animation-delay":n}}}},circles:{dur:1e3,circles:8,fn:(e,t,o)=>{const n=t/o,i=e*n-e+"ms",s=2*Math.PI*n;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":i}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(e,t)=>({r:6,style:{left:9-9*t+"px","animation-delay":-110*t+"ms"}})},lines:{dur:1e3,lines:12,fn:(e,t,o)=>({y1:17,y2:29,style:{transform:`rotate(${30*t+(t<6?180:-180)}deg)`,"animation-delay":e*t/o-e+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(e,t,o)=>({y1:12,y2:20,style:{transform:`rotate(${30*t+(t<6?180:-180)}deg)`,"animation-delay":e*t/o-e+"ms"}})}}},hKYS:function(e,t,o){"use strict";o.d(t,"a",function(){return g});var n=o("mrSG"),i=o("SxV6"),s=o("vkgz"),r=o("fXoL"),c=o("qBIq"),a=o("MS4O"),l=o("tyNb"),d=o("TEn/"),u=o("ofXK"),b=o("1seG");function f(e,t){if(1&e){const e=r.Pb();r.Ob(0,"ion-segment-button",7),r.Wb("click",function(){r.jc(e);const o=t.$implicit;return r.Yb().selectCategory(o)}),r.Mb(1,"ion-icon",8),r.Ob(2,"ion-label"),r.nc(3),r.Nb(),r.Nb()}if(2&e){const e=t.$implicit;r.dc("value",e.name),r.Bb(1),r.ec("name",e.icon),r.Bb(2),r.oc(e.name)}}function h(e,t){if(1&e){const e=r.Pb();r.Ob(0,"ion-slide"),r.Ob(1,"ion-grid",9),r.Wb("click",function(){r.jc(e);const o=t.$implicit;return r.Yb().findedBook(o.id)}),r.Ob(2,"ion-row",10),r.Mb(3,"img",11),r.Nb(),r.Ob(4,"ion-row",10),r.Ob(5,"p"),r.nc(6),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&e){const e=t.$implicit;r.Bb(3),r.dc("src",e.image,r.kc),r.Bb(3),r.oc(e.title.substr(0,25))}}let g=(()=>{class e{constructor(e,t,o){this._firestore=e,this._findedBook=t,this._router=o,this.max=10,this.min=0,this.slideOpts={slidesPerView:3,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}}}ngOnInit(){return Object(n.b)(this,void 0,void 0,function*(){this.categoryList$=this._firestore.getCategories();const e=yield this.categoryList$.pipe(Object(i.a)()).toPromise();this.defaultCategory=e[0],this.selectCategory(this.defaultCategory)})}selectCategory(e){this.categorySelected=e,this.booksPerCategory$=this._firestore.getBooksByCategory$(e).pipe(Object(s.a)(e=>console.log("res",e)))}findedBook(e){this._router.navigate(["/pages/home/book-finded",e])}loadData(e){return Object(n.b)(this,void 0,void 0,function*(){this.max=this.max+10,e.target.complete()})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(c.a),r.Lb(a.a),r.Lb(l.e))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-categories"]],decls:16,vars:9,consts:[[1,"block"],["color","primary"],["scrollable","",3,"value"],[3,"value","click",4,"ngFor","ngForOf"],[1,"block_list"],[3,"options"],[4,"ngFor","ngForOf"],[3,"value","click"],[3,"name"],["fixed","",3,"click"],[1,"ion-justify-content-center"],["alt","test",1,"img_book",3,"src"]],template:function(e,t){1&e&&(r.Ob(0,"ion-content"),r.Ob(1,"div",0),r.Ob(2,"ion-text",1),r.Ob(3,"h1"),r.nc(4,"Categories"),r.Nb(),r.Nb(),r.Ob(5,"ion-segment",2),r.mc(6,f,4,3,"ion-segment-button",3),r.Zb(7,"async"),r.Nb(),r.Nb(),r.Ob(8,"div",4),r.Ob(9,"ion-text",1),r.Ob(10,"h4"),r.nc(11),r.Nb(),r.Nb(),r.Ob(12,"ion-slides",5),r.mc(13,h,7,2,"ion-slide",6),r.Zb(14,"async"),r.Nb(),r.Nb(),r.Mb(15,"app-researched-book"),r.Nb()),2&e&&(r.Bb(5),r.dc("value",t.defaultCategory),r.Bb(1),r.dc("ngForOf",r.ac(7,5,t.categoryList$)),r.Bb(5),r.oc(null!=t.categorySelected&&t.categorySelected.name?null==t.categorySelected?null:t.categorySelected.name:null==t.defaultCategory?null:t.defaultCategory.name),r.Bb(1),r.dc("options",t.slideOpts),r.Bb(1),r.dc("ngForOf",r.ac(14,7,t.booksPerCategory$)))},directives:[d.m,d.H,d.y,d.P,u.j,d.D,b.a,d.z,d.p,d.t,d.C,d.n,d.w],pipes:[u.b],styles:["ion-content[_ngcontent-%COMP%]{padding:20px;margin:0}ion-button[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:5px}ion-button[_ngcontent-%COMP%]:active{background:red}.block[_ngcontent-%COMP%]{margin:10px}.block_list[_ngcontent-%COMP%]{margin:30px 10px 10px}.img_book[_ngcontent-%COMP%]{height:130px}p[_ngcontent-%COMP%]{font-size:13px}"]}),e})()},qBIq:function(e,t,o){"use strict";o.d(t,"a",function(){return l});var n=o("mrSG"),i=o("2Vo4"),s=o("lJxs"),r=o("vkgz"),c=o("fXoL"),a=o("I/3d");let l=(()=>{class e{constructor(e){this._firestore=e,this.booksSubject$=new i.a([]),this.books$=this.booksSubject$.asObservable(),this.categorySujet$=new i.a([]),this.booksBycategory$=this.categorySujet$.asObservable(),this._researchedBooks=new i.a([]),this.researchedBooks$=this._researchedBooks.asObservable(),this.colections=this._firestore.collection("books",e=>e.where("researched","==",!1)),this.colections.stateChanges(["added","modified","removed"]).pipe(Object(s.a)(e=>e.map(e=>{const t=e.payload.doc.data(),o=e.type;return Object.assign(Object.assign({id:e.payload.doc.id},t),{type:o})}))).subscribe(e=>{const t=[...this.booksSubject$.value.filter(t=>!e.find(e=>e.id===t.id)),...e.filter(e=>"removed"!==e.type)].map(e=>(delete e.type,e));this.booksSubject$.next(t)}),this.categories$=this._firestore.collection("categories").valueChanges(),this._firestore.collection("books",e=>e.where("researched","==",!0)).stateChanges(["added","modified","removed"]).pipe(Object(s.a)(e=>e.map(e=>{const t=e.payload.doc.data(),o=e.type;return Object.assign(Object.assign({id:e.payload.doc.id},t),{type:o})}))).subscribe(e=>{const t=this._researchedBooks.value.filter(t=>!e.find(e=>e.id===t.id));console.log("book removed reseached true!!!!!!!!!");const o=[...t,...e.filter(e=>"removed"!==e.type)].map(e=>(delete e.type,e));this._researchedBooks.next(o)})}createBook(e){this._firestore.collection("books").add(e).then(e=>{console.log("Document written with ID: ",e.id)}).catch(e=>{console.error("Error adding document: ",e)})}getBooksByCategory$(e){return this.books$.pipe(Object(s.a)(t=>t.filter(t=>t.categoryId===e.name)),Object(r.a)(e=>this.categorySujet$.next(e)))}getCategories(){return this.categories$}updateBook(e){var{id:t}=e,o=Object(n.f)(e,["id"]);this._firestore.collection("books").doc(t).update(o).then(e=>console.log("Success!!!")).catch(e=>console.log("error: ",e))}deleteBook(e){this._firestore.collection("books").doc(e).delete().then(e=>e).catch(e=>console.log("Error: ",e))}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(a.a))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qULd:function(e,t,o){"use strict";o.d(t,"a",function(){return s}),o.d(t,"b",function(){return r}),o.d(t,"c",function(){return i}),o.d(t,"d",function(){return a}),o.d(t,"e",function(){return c});const n={getEngine(){const e=window;return e.TapticEngine||e.Capacitor&&e.Capacitor.isPluginAvailable("Haptics")&&e.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(e){const t=this.getEngine();if(!t)return;const o=this.isCapacitor()?e.style.toUpperCase():e.style;t.impact({style:o})},notification(e){const t=this.getEngine();if(!t)return;const o=this.isCapacitor()?e.style.toUpperCase():e.style;t.notification({style:o})},selection(){this.impact({style:"light"})},selectionStart(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionStart():e.gestureSelectionStart())},selectionChanged(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionChanged():e.gestureSelectionChanged())},selectionEnd(){const e=this.getEngine();e&&(this.isCapacitor()?e.selectionEnd():e.gestureSelectionEnd())}},i=()=>{n.selection()},s=()=>{n.selectionStart()},r=()=>{n.selectionChanged()},c=()=>{n.selectionEnd()},a=e=>{n.impact(e)}}}]);