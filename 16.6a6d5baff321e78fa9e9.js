(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{jWvB:function(e,t,o){"use strict";o.r(t),o.d(t,"BooksDetailModule",function(){return O});var i=o("ofXK"),n=o("tyNb"),r=o("mrSG"),s=o("3Pt+"),b=o("vkgz"),c=o("fXoL"),a=o("qBIq"),u=o("UbJi"),l=o("TEn/");function h(e,t){if(1&e&&(c.Ob(0,"ion-select-option",16),c.nc(1),c.Nb()),2&e){const e=t.$implicit;c.dc("value",e.name),c.Bb(1),c.pc(" ",e.name," ")}}function g(e,t){if(1&e&&(c.Ob(0,"ion-select-option",16),c.nc(1),c.Nb()),2&e){const e=t.$implicit;c.dc("value",e.id),c.Bb(1),c.pc(" ",e.name," ")}}const f=[{path:"",component:(()=>{class e{constructor(e,t,o,i,n){this._firestore=e,this._angularAuth=t,this._route=o,this._formBuilder=i,this._toast=n,this.newBook={},this.formFormat="offer",this.form=this._formBuilder.group({category:["",s.k.required],offer:["",s.k.required]})}ngOnInit(){this.categoryList$=this._firestore.getCategories(),this.subscription=this._route.queryParams.subscribe(e=>this.theBook=e)}segmentChanged(e){this.formFormat=e.target.value,console.log("event: ",e.target.value)}registerBook$(){return Object(r.b)(this,void 0,void 0,function*(){const e=yield this._angularAuth.currentUser.then(e=>e.uid);this.newBook=Object.assign(Object.assign({},this.newBook),{userId:e,title:this.theBook.title?this.theBook.title:"",authors:this.theBook.authors?this.theBook.authors:"",image:this.theBook.image,publisher:this.theBook.publisher?this.theBook.publisher:"",categoryId:this.form.value.category,offer:this.form.value.offer,interests:0,researched:"offer"!==this.formFormat,subcategory:this.selectedSubCategory}),this._firestore.createBook(this.newBook),this.displayPopUp(),this.form.reset()})}displayPopUp(){return Object(r.b)(this,void 0,void 0,function*(){const e=yield this._toast.create({message:"Livre enregistr\xe9 avec success",position:"bottom",keyboardClose:!0,color:"dark",duration:2e3});yield e.present()})}selectSubCategory(e){this.selectedSubCategory=e.detail.value,console.log("event: ",this.selectedSubCategory)}getSubcategory(e){this.formSubCategories=e.detail.value,this.subCategoriesList(e.detail.value)}subCategoriesList(e){this._firestore.getSubCategories(e),this.subCategory$=this._firestore.subCategories$,this.subscription2=this._firestore.subCategories$.pipe(Object(b.a)(e=>this.isSubCategory=!(e.length>0))).subscribe(e=>e)}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(a.a),c.Lb(u.a),c.Lb(n.a),c.Lb(s.a),c.Lb(l.R))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-books-detail"]],decls:59,vars:13,consts:[[1,"ion-no-border"],["slot","start"],[3,"src"],[1,"ion-justify-content-center"],[1,"info_text"],["color","academicus-green","value","offer",3,"ionChange"],["value","offer"],["value","request"],["fixed",""],[3,"formGroup","ngSubmit"],["formControlName","category","okText","Okay","cancelText","Dismiss","required","",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["okText","Okay","cancelText","Dismiss",3,"disabled","ionChange"],["formControlName","offer","placeholder","Offre","required",""],["offer",""],["color","academicus-green","type","submit","expand","full"],[3,"value"]],template:function(e,t){1&e&&(c.Ob(0,"ion-header",0),c.Ob(1,"ion-toolbar"),c.Ob(2,"ion-buttons",1),c.Mb(3,"ion-back-button"),c.Nb(),c.Ob(4,"ion-title"),c.nc(5),c.Nb(),c.Nb(),c.Nb(),c.Ob(6,"ion-content"),c.Ob(7,"ion-card"),c.Ob(8,"ion-card-header"),c.Mb(9,"ion-img",2),c.Ob(10,"ion-grid"),c.Ob(11,"ion-row",3),c.Ob(12,"ion-card-title"),c.nc(13),c.Nb(),c.Nb(),c.Ob(14,"ion-row",3),c.Ob(15,"ion-card-subtitle"),c.nc(16),c.Nb(),c.Nb(),c.Ob(17,"ion-row",3),c.Ob(18,"ion-text"),c.nc(19," \xc9diteur: "),c.Nb(),c.nc(20),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(21,"ion-grid"),c.Ob(22,"ion-row",3),c.Ob(23,"ion-text"),c.Ob(24,"p",4),c.nc(25,"Ajouter livre"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(26,"ion-segment",5),c.Wb("ionChange",function(e){return t.segmentChanged(e)}),c.Ob(27,"ion-segment-button",6),c.Ob(28,"ion-label"),c.nc(29,"J'offre"),c.Nb(),c.Nb(),c.Ob(30,"ion-segment-button",7),c.Ob(31,"ion-label"),c.nc(32,"Je recherche"),c.Nb(),c.Nb(),c.Nb(),c.Ob(33,"ion-grid",8),c.Ob(34,"form",9),c.Wb("ngSubmit",function(){return t.registerBook$()}),c.Ob(35,"ion-row"),c.Ob(36,"ion-col"),c.Ob(37,"ion-list"),c.Ob(38,"ion-item"),c.Ob(39,"ion-label"),c.nc(40,"Categories"),c.Nb(),c.Ob(41,"ion-select",10),c.Wb("ionChange",function(e){return t.getSubcategory(e)}),c.mc(42,h,2,2,"ion-select-option",11),c.Zb(43,"async"),c.Nb(),c.Nb(),c.Ob(44,"ion-item"),c.Ob(45,"ion-label"),c.nc(46,"Sub categories"),c.Nb(),c.Ob(47,"ion-select",12),c.Wb("ionChange",function(e){return t.selectSubCategory(e)}),c.mc(48,g,2,2,"ion-select-option",11),c.Zb(49,"async"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(50,"ion-row"),c.Ob(51,"ion-col"),c.Ob(52,"ion-item"),c.Mb(53,"ion-textarea",13,14),c.Nb(),c.Nb(),c.Nb(),c.Ob(55,"ion-row"),c.Ob(56,"ion-col"),c.Ob(57,"ion-button",15),c.nc(58,"Enregister"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.Bb(5),c.oc(t.theBook.title),c.Bb(4),c.dc("src",t.theBook.image),c.Bb(4),c.oc(t.theBook.title),c.Bb(3),c.oc(t.theBook.authors),c.Bb(4),c.pc(" ",t.theBook.publisher," "),c.Bb(14),c.dc("formGroup",t.form),c.Bb(8),c.dc("ngForOf",c.ac(43,9,t.categoryList$)),c.Bb(5),c.dc("disabled",t.isSubCategory),c.Bb(1),c.dc("ngForOf",c.ac(49,11,t.subCategory$)))},directives:[l.o,l.L,l.f,l.b,l.c,l.K,l.m,l.g,l.i,l.q,l.n,l.w,l.k,l.j,l.H,l.y,l.P,l.z,l.t,s.l,s.h,s.c,l.l,l.u,l.s,l.A,s.g,s.b,s.j,i.j,l.I,l.Q,l.e,l.B],pipes:[i.b],styles:["ion-img[_ngcontent-%COMP%]{height:200px}.info_text[_ngcontent-%COMP%]{margin:10px}"]}),e})()}];let d=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({imports:[[n.h.forChild(f)],n.h]}),e})();var m=o("PCNd");let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({imports:[[i.c,d,l.M,m.a,s.i]]}),e})()}}]);