(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{P9on:function(e,o,r){"use strict";r.r(o),r.d(o,"AuthenticationModule",function(){return g});var t=r("ofXK"),n=r("tyNb"),i=r("3Pt+"),s=r("gcOT"),a=r("fXoL"),c=r("2Vo4"),b=r("I/3d"),l=r("UbJi");let u=(()=>{class e{constructor(e,o,r){this._firestor=e,this._authFirebase=o,this._router=r,this.userIdSubJect$=new c.a(null),this.userId$=this.userIdSubJect$.asObservable()}createUser(e,o){this._authFirebase.createUserWithEmailAndPassword(e,o).then(e=>{const{email:o,uid:r}=e.user;this._firestor.collection("users").doc(r).set({email:o}).then(()=>{console.log("Document successfully written!"),this._router.navigate(["/pages/home"])}).catch(e=>{console.error("Error writing document: ",e)})}).catch(e=>{})}signIn(e,o){this._authFirebase.signInWithEmailAndPassword(e,o).then(e=>{this._router.navigate(["/pages/home"])})}signOut(){this._authFirebase.signOut().then(()=>{console.log("deconnect\xe9")}).catch(e=>{})}}return e.\u0275fac=function(o){return new(o||e)(a.Sb(b.a),a.Sb(l.a),a.Sb(n.e))},e.\u0275prov=a.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=r("TEn/");const m=function(){return["/pages/login/register"]},h=function(){return["/pages/login"]},p=[{path:"",component:(()=>{class e{constructor(e,o,r){this._authService=e,this._formBuider=o,this._platforme=r}ngOnInit(){this.form=this._formBuider.group({email:["",i.k.required],password:["",[i.k.required,i.k.minLength(6)]]}),this._platforme.backButton.subscribeWithPriority(666666,()=>s.a.exitApp())}authentication(){const{email:e,password:o}=this.form.value;""!==e||""!==o?this._authService.signIn(e,o):alert("Remplissez tout les champs")}}return e.\u0275fac=function(o){return new(o||e)(a.Lb(u),a.Lb(i.a),a.Lb(d.N))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-authentication"]],decls:29,vars:4,consts:[[1,"ion-no-border"],["color","academicus-green"],["name","school-sharp","size","large",1,"icon"],[1,"container_page"],[3,"formGroup","ngSubmit"],["size","12"],["color","academicus-green",1,"ion-text-center"],["formControlName","email","placeholder","Email"],["type","password","formControlName","password","placeholder","Password"],["type","submit","color","academicus-green","expand","block",1,"btn_login",3,"disabled"],["expand","block",3,"routerLink"]],template:function(e,o){1&e&&(a.Ob(0,"ion-header",0),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-title",1),a.Mb(3,"ion-icon",2),a.nc(4," UNILivres "),a.Nb(),a.Nb(),a.Nb(),a.Ob(5,"ion-content"),a.Ob(6,"div",3),a.Ob(7,"ion-grid"),a.Ob(8,"form",4),a.Wb("ngSubmit",function(){return o.authentication()}),a.Ob(9,"ion-row"),a.Ob(10,"ion-col",5),a.Ob(11,"ion-text",6),a.Ob(12,"h1"),a.nc(13,"Login"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(14,"ion-row"),a.Ob(15,"ion-col",5),a.Ob(16,"ion-item"),a.Mb(17,"ion-input",7),a.Nb(),a.Nb(),a.Ob(18,"ion-col",5),a.Ob(19,"ion-item"),a.Mb(20,"ion-input",8),a.Nb(),a.Nb(),a.Nb(),a.Ob(21,"ion-row"),a.Ob(22,"ion-col",5),a.Ob(23,"ion-button",9),a.nc(24,"Login "),a.Nb(),a.Nb(),a.Nb(),a.Ob(25,"ion-row"),a.Ob(26,"ion-col",5),a.Ob(27,"ion-button",10),a.nc(28,"Cr\xe9er compte"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.Bb(8),a.dc("formGroup",o.form),a.Bb(15),a.dc("disabled",o.form.invalid),a.Bb(4),a.dc("routerLink",a.fc(3,m)))},directives:[d.o,d.L,d.K,d.p,d.m,d.n,i.l,i.h,i.c,d.w,d.l,d.H,d.s,d.r,d.Q,i.g,i.b,d.e,n.f,d.O],styles:[".container_page[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}"]}),e})()},{path:"register",component:(()=>{class e{constructor(e,o){this._formBuilder=e,this._authService=o,this.formErrorEmail=!1,this.formErrorPassword=!1}ngOnInit(){this.form=this._formBuilder.group({email:["",[i.k.required,i.k.maxLength(200)]],password:["",[i.k.required,i.k.minLength(6)]]})}registerUser(){if("VALID"!==this.form.get("email").status)return void(this.formErrorEmail=!0);if("VALID"!==this.form.get("password").status)return void(this.formErrorPassword=!0);const{email:e,password:o}=this.form.value;this._authService.createUser(e,o)}}return e.\u0275fac=function(o){return new(o||e)(a.Lb(i.a),a.Lb(u))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-register"]],decls:29,vars:6,consts:[[1,"ion-no-border"],["color","academicus-green"],["name","school-sharp","size","large",1,"icon"],[1,"container_page"],[3,"formGroup","ngSubmit"],["size","12"],["color","academicus-green",1,"ion-text-center"],["formControlName","email","placeholder","Email",3,"ngClass"],["type","password","formControlName","password","placeholder","Password",3,"ngClass"],["type","submit","color","academicus-green","expand","block",3,"disabled"],["expand","block",3,"routerLink"]],template:function(e,o){1&e&&(a.Ob(0,"ion-header",0),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-title",1),a.Mb(3,"ion-icon",2),a.nc(4," UNILivres "),a.Nb(),a.Nb(),a.Nb(),a.Ob(5,"ion-content"),a.Ob(6,"div",3),a.Ob(7,"ion-grid"),a.Ob(8,"form",4),a.Wb("ngSubmit",function(){return o.registerUser()}),a.Ob(9,"ion-row"),a.Ob(10,"ion-col",5),a.Ob(11,"ion-text",6),a.Ob(12,"h1"),a.nc(13,"Cr\xe9er compte"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(14,"ion-row"),a.Ob(15,"ion-col",5),a.Ob(16,"ion-item"),a.Mb(17,"ion-input",7),a.Nb(),a.Nb(),a.Ob(18,"ion-col",5),a.Ob(19,"ion-item"),a.Mb(20,"ion-input",8),a.Nb(),a.Nb(),a.Nb(),a.Ob(21,"ion-row"),a.Ob(22,"ion-col",5),a.Ob(23,"ion-button",9),a.nc(24," Valider "),a.Nb(),a.Nb(),a.Nb(),a.Ob(25,"ion-row"),a.Ob(26,"ion-col",5),a.Ob(27,"ion-button",10),a.nc(28,"Login"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.Bb(8),a.dc("formGroup",o.form),a.Bb(9),a.dc("ngClass",o.formErrorEmail&&"alert_error"),a.Bb(3),a.dc("ngClass",o.formErrorPassword&&"alert_error"),a.Bb(3),a.dc("disabled",o.form.invalid),a.Bb(4),a.dc("routerLink",a.fc(5,h)))},directives:[d.o,d.L,d.K,d.p,d.m,d.n,i.l,i.h,i.c,d.w,d.l,d.H,d.s,d.r,d.Q,i.g,i.b,t.i,d.e,n.f,d.O],styles:[".container_page[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}ion-input.alert_error[_ngcontent-%COMP%]{border:1px solid red;border-radius:4px}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({imports:[[n.h.forChild(p)],n.h]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({imports:[[t.c,f,d.M,i.i]]}),e})()}}]);