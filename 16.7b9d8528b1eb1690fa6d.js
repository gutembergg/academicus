(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{fOOd:function(t,o,i){"use strict";i.r(o),i.d(o,"HomeModule",function(){return I});var e=i("ofXK"),n=i("tyNb"),s=i("fXoL"),r=i("2Vo4"),b=i("I/3d");let c=(()=>{class t{constructor(t){this._firestore=t,this.authorSujectData$=new r.a(null),this.booksByAuthor$=this.authorSujectData$.asObservable()}getBooksByAuthor(t){this.colections=this._firestore.collection("books",o=>o.where("authors","==",`${t}`)),this.colections.valueChanges({idField:"id"}).subscribe(t=>this.authorSujectData$.next(t))}get(){return this.booksByAuthor$}}return t.\u0275fac=function(o){return new(o||t)(s.Sb(b.a))},t.\u0275prov=s.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var a=i("MS4O"),u=i("TEn/");function l(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-slide"),s.Ob(1,"ion-grid",7),s.Wb("click",function(){s.jc(t);const i=o.$implicit;return s.Yb().selectBook(i.id)}),s.Ob(2,"ion-row",3),s.Mb(3,"img",8),s.Nb(),s.Ob(4,"ion-row",3),s.Ob(5,"p"),s.nc(6),s.Nb(),s.Nb(),s.Nb(),s.Nb()}if(2&t){const t=o.$implicit;s.Bb(3),s.dc("src",t.image,s.kc),s.Bb(3),s.oc(null==t?null:t.title.substr(0,25))}}let h=(()=>{class t{constructor(t,o,i,e){this._authorsFindedService=t,this._route=o,this._router=i,this._bookFindedService=e,this.slideOpts={slidesPerView:3,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}}}ngOnInit(){this._route.paramMap.subscribe(t=>{const o=t.get("id");this.author=o,this._authorsFindedService.getBooksByAuthor(o)}),this.authorBooks=this._authorsFindedService.booksByAuthor$,this.subscription=this.authorBooks.subscribe()}selectBook(t){this._router.navigate(["/pages/home/book-finded",t])}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(s.Lb(c),s.Lb(n.a),s.Lb(n.e),s.Lb(a.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-author-finded"]],decls:16,vars:5,consts:[["slot","start"],[1,"block"],["fixed",""],[1,"ion-justify-content-center"],["color","primary"],[3,"options"],[4,"ngFor","ngForOf"],["fixed","",3,"click"],["alt","test",1,"img_book",3,"src"]],template:function(t,o){1&t&&(s.Ob(0,"ion-header"),s.Ob(1,"ion-toolbar"),s.Ob(2,"ion-buttons",0),s.Mb(3,"ion-back-button"),s.Nb(),s.Ob(4,"ion-title"),s.nc(5,"Author"),s.Nb(),s.Nb(),s.Nb(),s.Ob(6,"ion-content"),s.Ob(7,"div",1),s.Ob(8,"ion-grid",2),s.Ob(9,"ion-row",3),s.Ob(10,"ion-text",4),s.Ob(11,"h1"),s.nc(12),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(13,"ion-slides",5),s.mc(14,l,7,2,"ion-slide",6),s.Zb(15,"async"),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.Bb(12),s.oc(o.author),s.Bb(1),s.dc("options",o.slideOpts),s.Bb(1),s.dc("ngForOf",s.ac(15,3,o.authorBooks)))},directives:[u.o,u.L,u.f,u.b,u.c,u.K,u.m,u.n,u.w,u.H,u.D,e.j,u.C],pipes:[e.b],styles:[".block[_ngcontent-%COMP%]{margin:30px 5px 5px}.img_book[_ngcontent-%COMP%]{height:130px}ion-slides[_ngcontent-%COMP%]{margin-top:20px}"]}),t})();var d=i("3Pt+"),f=i("vkgz"),p=i("M7+f");let g=(()=>{class t{constructor(t,o,i,e){this._bookFindedService=t,this._formBuilder=o,this._inerestService=i,this._route=e}ngOnInit(){this._route.paramMap.subscribe(t=>{const o=t.get("id");this._bookFindedService.getUserBookById(o)}),this.subscription=this._bookFindedService.bookFinded$.pipe(Object(f.a)(t=>t)).subscribe(t=>this.book=t),this.form=this._formBuilder.group({offer:["",d.k.required],contact:["",d.k.required]})}onSubmit(){const t=Object.assign(Object.assign({},this.form.value),{bookId:this.book.id});this._inerestService.createInterest(t)}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(s.Lb(a.a),s.Lb(d.a),s.Lb(p.a),s.Lb(n.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-book-finded"]],decls:37,vars:8,consts:[["slot","start"],[3,"src"],[1,"ion-justify-content-center"],[3,"formGroup","ngSubmit"],["position","stacked"],["formControlName","offer"],["formControlName","contact"],["expand","block","type","submit",3,"disabled"]],template:function(t,o){1&t&&(s.Ob(0,"ion-header"),s.Ob(1,"ion-toolbar"),s.Ob(2,"ion-buttons",0),s.Mb(3,"ion-back-button"),s.Nb(),s.Ob(4,"ion-title"),s.nc(5),s.Nb(),s.Nb(),s.Nb(),s.Ob(6,"ion-content"),s.Ob(7,"ion-card"),s.Ob(8,"ion-card-header"),s.Mb(9,"ion-img",1),s.Ob(10,"ion-grid"),s.Ob(11,"ion-row",2),s.Ob(12,"ion-card-title"),s.nc(13),s.Nb(),s.Nb(),s.Ob(14,"ion-row",2),s.Ob(15,"ion-card-subtitle"),s.nc(16),s.Nb(),s.Nb(),s.Ob(17,"ion-row",2),s.Ob(18,"ion-text"),s.nc(19," \xc9diteur: "),s.Nb(),s.nc(20),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(21,"form",3),s.Wb("ngSubmit",function(){return o.onSubmit()}),s.Ob(22,"ion-card"),s.Ob(23,"ion-card-content"),s.Ob(24,"p"),s.nc(25),s.Nb(),s.Nb(),s.Ob(26,"ion-card-content"),s.Ob(27,"ion-item"),s.Ob(28,"ion-label",4),s.nc(29,"Mon offre"),s.Nb(),s.Mb(30,"ion-input",5),s.Nb(),s.Ob(31,"ion-item"),s.Ob(32,"ion-label",4),s.nc(33,"Mon contact"),s.Nb(),s.Mb(34,"ion-input",6),s.Nb(),s.Nb(),s.Nb(),s.Ob(35,"ion-button",7),s.nc(36," Envoyer "),s.Nb(),s.Nb(),s.Nb()),2&t&&(s.Bb(5),s.oc(null==o.book?null:o.book.title),s.Bb(4),s.dc("src",null==o.book?null:o.book.image),s.Bb(4),s.oc(null==o.book?null:o.book.title),s.Bb(3),s.oc(null==o.book?null:o.book.authors),s.Bb(4),s.pc(" ",null==o.book?null:o.book.publisher," "),s.Bb(1),s.dc("formGroup",o.form),s.Bb(4),s.pc("Offert pour: ",null==o.book?null:o.book.offer,""),s.Bb(10),s.dc("disabled",o.form.invalid))},directives:[u.o,u.L,u.f,u.b,u.c,u.K,u.m,u.g,u.i,u.q,u.n,u.w,u.k,u.j,u.H,d.l,d.h,d.c,u.h,u.s,u.t,u.r,u.Q,d.g,d.b,u.e],styles:["ion-img[_ngcontent-%COMP%]{height:200px}.btn_send[_ngcontent-%COMP%]{width:100%;height:40px;background:#00f;color:#fff;margin:3px;border-radius:6px}"]}),t})();var O=i("mrSG"),m=i("SxV6"),k=i("qBIq"),N=i("UbJi"),v=i("hKYS");function B(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-button",10),s.Wb("click",function(){return s.jc(t),s.Yb().signOut()}),s.nc(1," SignOut "),s.Nb()}}function _(t,o){if(1&t){const t=s.Pb();s.Ob(0,"ion-item",11),s.Wb("click",function(){s.jc(t);const i=o.$implicit;return s.Yb().selectedItem(i)}),s.nc(1),s.Nb()}if(2&t){const t=o.$implicit,i=s.Yb();s.Bb(1),s.pc(" ","titre"===i.seachFomat?null==t||null==t.title?null:t.title.substr(0,25):null==t?null:t.substr(0,25)," ")}}const w=function(t){return{display:t}},y=function(){return["/pages/login"]},L=[{path:"",component:(()=>{class t{constructor(t,o,i,e){this._firestore=t,this._bookFindedService=o,this._router=i,this._authService=e,this.listItems=[],this.authorsList=[],this.seachFomat="titre"}ngOnInit(){this.dbBooks$=this._firestore.books$.pipe(Object(f.a)(t=>t.map(t=>this.authorsList.push(t.authors)))),this.subscription=this.dbBooks$.subscribe(),this._authService.onAuthStateChanged(t=>this.user=t)}searchBooks(t){return Object(O.b)(this,void 0,void 0,function*(){const o=t.target.value;if(0===o.length)return void(this.listItems=[]);const i=yield this.dbBooks$.pipe(Object(m.a)()).toPromise();if("titre"===this.seachFomat){const t=i.filter(t=>t.title.toLocaleLowerCase().includes(o.toLocaleLowerCase()));this.listItems=t}if("authors"===this.seachFomat){const t=new Set;this.authorsList.forEach(o=>{t.add(o)});const i=[...t.values()].filter(Boolean).filter(t=>t.toLocaleLowerCase().includes(o.toLocaleLowerCase()));this.listItems=i}})}segmentChanged(t){this.seachFomat=t.target.value,console.log("event",t.target.value)}selectedItem(t){if("titre"===this.seachFomat){const{id:o}=t;this.listItems=[],this._router.navigate(["/pages/home/book-finded",o])}else console.log("authos??>",t),this.listItems=[],this._router.navigate(["/pages/home/author-finded",t])}signOut(){this._authService.signOut(),this._router.navigate(["pages/login"])}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(s.Lb(k.a),s.Lb(a.a),s.Lb(n.e),s.Lb(N.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["app-home"]],decls:24,vars:9,consts:[["slot","end"],["routerLinkActive","router-link-active","color","primary","expand","block","fill","solid",3,"ngStyle","routerLink"],["color","danger","expand","block","fill","solid",3,"click",4,"ngIf"],["value","titre",3,"ionChange"],["topButton",""],["value","titre"],["value","authors"],["type","text",3,"placeholder","ionInput"],[3,"hidden"],[3,"click",4,"ngFor","ngForOf"],["color","danger","expand","block","fill","solid",3,"click"],[3,"click"]],template:function(t,o){if(1&t&&(s.Ob(0,"ion-header"),s.Ob(1,"ion-toolbar"),s.Ob(2,"ion-buttons",0),s.Ob(3,"ion-button",1),s.nc(4,"Login"),s.Nb(),s.mc(5,B,2,0,"ion-button",2),s.Nb(),s.Ob(6,"ion-title"),s.nc(7,"Academicus"),s.Nb(),s.Nb(),s.Nb(),s.Ob(8,"ion-content"),s.Ob(9,"ion-grid"),s.Ob(10,"ion-row"),s.Ob(11,"ion-segment",3,4),s.Wb("ionChange",function(t){return o.segmentChanged(t)}),s.Ob(13,"ion-segment-button",5),s.Ob(14,"ion-label"),s.nc(15,"Titre"),s.Nb(),s.Nb(),s.Ob(16,"ion-segment-button",6),s.Ob(17,"ion-label"),s.nc(18,"Author"),s.Nb(),s.Nb(),s.Nb(),s.Nb(),s.Ob(19,"ion-row"),s.Ob(20,"ion-searchbar",7),s.Wb("ionInput",function(t){return o.searchBooks(t)}),s.Nb(),s.Ob(21,"ion-list",8),s.mc(22,_,2,1,"ion-item",9),s.Nb(),s.Nb(),s.Nb(),s.Mb(23,"app-categories"),s.Nb()),2&t){const t=s.ic(12);s.Bb(3),s.dc("ngStyle",s.gc(6,w,o.user&&"none"))("routerLink",s.fc(8,y)),s.Bb(2),s.dc("ngIf",o.user),s.Bb(15),s.ec("placeholder",t.value),s.Bb(1),s.dc("hidden",o.listItems.length<=0),s.Bb(1),s.dc("ngForOf",o.listItems)}},directives:[u.o,u.L,u.f,u.e,n.g,e.l,n.f,u.O,e.k,u.K,u.m,u.n,u.w,u.y,u.P,u.z,u.t,u.x,u.Q,u.u,e.j,v.a,u.s],styles:["ion-grid[_ngcontent-%COMP%]{margin-top:10px}"]}),t})()},{path:"book-finded/:id",component:g},{path:"author-finded/:id",component:h}];let S=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({imports:[[n.h.forChild(L)],n.h]}),t})();var F=i("PCNd");let I=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({imports:[[e.c,S,u.M,F.a,d.d,d.i]]}),t})()}}]);